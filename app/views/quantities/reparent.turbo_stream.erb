<% @self_and_progenies.each do |q| %>
  <%= turbo_stream.remove q %>
<% end %>
<% @previous_ancestors.union(@ancestors).each do |ancestor| %>
  <%= turbo_stream.replace ancestor %>
<% end %>
<% @self_and_progenies.each do |q| %>
  <%= @before ? turbo_stream.before(@before, q) : turbo_stream.append(:quantities, q) %>
<% end %>
